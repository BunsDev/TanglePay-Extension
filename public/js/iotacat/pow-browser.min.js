!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@iota/crypto.js")):"function"==typeof define&&define.amd?define(["exports","@iota/crypto.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).IotaPowBrowser={},e.IotaCrypto)}(this,(function(e,t){"use strict";e.BrowserPowProvider=class{constructor(e){this._numCpus=null!=e?e:window.navigator.hardwareConcurrency}async pow(e,o,r){const s=e.slice(0,-8),n=t.Blake2b.sum256(s),i=t.PowHelper.calculateTargetZeros(e,o);return new Promise(((e,t)=>{const o=BigInt("18446744073709551615")/BigInt(this._numCpus),s=[];for(let a=0;a<this._numCpus;a++){const c=this.createWorker();c.postMessage([n,i,(o*BigInt(a)).toString(),r]),s.push(c),c.addEventListener("message",(async t=>{for(let e=0;e<s.length;e++)s[e].terminate();e(t.data)})),c.addEventListener("error",(async e=>{t(e.message)}))}}))}createWorker(){const e=new Blob(["(",(()=>{self.addEventListener("message",(e=>{importScripts("https://cdn.jsdelivr.net/npm/@iota/crypto.js@next/dist/cjs/index-bundle.min.js");const[t,o,r,s]=[...e.data],n=self.IotaCrypto.PowHelper.performPow(t,o,r,s).toString();postMessage(n)}))}).toString(),")()"],{type:"application/javascript"}),t=URL.createObjectURL(e),o=new Worker(t);return URL.revokeObjectURL(t),o}},Object.defineProperty(e,"__esModule",{value:!0})}));